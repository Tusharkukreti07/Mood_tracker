<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Shared Professional UI CSS -->
    <link rel="stylesheet" href="styles/shared-layout.css">
    <link rel="stylesheet" href="styles/shared-components.css">
    <link rel="stylesheet" href="styles/shared-responsive.css">
    <!-- Original CSS files -->
    <link rel="stylesheet" href="styles/mood-tracker.css">
    <link rel="stylesheet" href="styles/mood-tracker-components.css">
    <link rel="stylesheet" href="styles/mood-tracker-cards.css">
    <link rel="stylesheet" href="styles/mood-tracker-charts.css">
    <link rel="stylesheet" href="styles/mood-tracker-responsive.css">
    <!-- Enhanced CSS files -->
    <link rel="stylesheet" href="styles/mood-tracker-enhanced.css">
    <link rel="stylesheet" href="styles/mood-tracker-components-enhanced.css">
    <link rel="stylesheet" href="styles/mood-tracker-cards-enhanced.css">
    <link rel="stylesheet" href="styles/mood-tracker-charts-enhanced.css">
    <link rel="stylesheet" href="styles/mood-tracker-responsive-enhanced.css">
    <!-- New Mood Reflection CSS -->
    <link rel="stylesheet" href="styles/mood-reflection.css">
    <!-- Enhanced Mood History CSS -->
    <link rel="stylesheet" href="styles/mood-history-enhanced.css">
</head>
<body>
    <!-- Loading overlay -->
    <div class="loading-overlay active">
        <div class="loading-spinner"></div>
    </div>

    <!-- Navigation bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">
                <div class="logo-icon">M</div>
                <div class="logo-text">Mood Tracker</div>
            </a>
            <div class="navbar-menu">
                <a href="index.html" class="nav-link active">Dashboard</a>
                <a href="calendar-view.html" class="nav-link">Calendar</a>
                <a href="#" class="nav-link">Statistics</a>
                <a href="#" class="nav-link">Settings</a>
                <button class="theme-toggle" title="Toggle Dark Mode">🌙</button>
            </div>
        </div>
    </nav>

    <main class="app-container">
        <div class="card">
            <div class="card-header">
                <div>
                    <h1 class="card-title">Hello, Lisa!</h1>
                    <p class="card-subtitle">How are you feeling today?</p>
                </div>
                <div class="user">
                    <div class="avatar">
                        👤
                    </div>
                </div>
            </div>

            <small class="text-light mt-sm" id="current-date">Wednesday, April 16th, 2023</small>

            <div class="mood-selector grid-5 mt-lg">
                <div class="mood-option">
                    <div class="mood-emoji">😔</div>
                    <div class="mood-name">Sad</div>
                </div>
                <div class="mood-option">
                    <div class="mood-emoji">😊</div>
                    <div class="mood-name">Happy</div>
                </div>
                <div class="mood-option">
                    <div class="mood-emoji">😐</div>
                    <div class="mood-name">Neutral</div>
                </div>
                <div class="mood-option selected">
                    <div class="mood-emoji">😄</div>
                    <div class="mood-name">Very Happy</div>
                </div>
                <div class="mood-option">
                    <div class="mood-emoji">😌</div>
                    <div class="mood-name">Calm</div>
                </div>
                <!-- Custom mood button will be added by JavaScript -->
            </div>

            <div class="mood-card mt-xl">
                <div class="mood-content">
                    <div class="mood-label">I'm feeling</div>
                    <div class="mood-value">Very Happy</div>

                    <div class="mood-quote">
                        <p>"When your heart is full, share your light with the world."</p>
                    </div>

                    <button class="btn btn-secondary btn-sm mt-md" id="edit-mood-btn" onclick="editTodaysMoodEntry()">
                        <i class="fas fa-edit mr-sm"></i> Edit Today's Entry
                    </button>
                </div>
                <div class="emoji">
                    <div>😄</div>
                </div>
            </div>
        </div>

        <div class="grid grid-2 mt-xl">
            <div class="card animate-fade-in-left">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Mood Stats</h2>
                        <p class="card-subtitle">Your mood patterns and trends</p>
                    </div>
                    <div class="badge badge-primary">Last 7 Days</div>
                </div>
                <div class="card-content">
                    <div class="stats-section">
                        <div class="stats-card">
                            <div class="stats-header">
                                <div class="stats-title">
                                    <div class="stats-icon">📊</div>
                                    <span>Average Mood</span>
                                </div>
                                <small class="text-light text-sm">Last 7 trend avg.</small>
                            </div>

                            <div class="stats-icon neutral">😐</div>
                            <div class="stats-value">Neutral</div>
                            <div class="stats-subtitle">Stable in the previous 2 week avg.</div>
                        </div>

                        <div class="stats-card sleep">
                            <div class="stats-header">
                                <div class="stats-title">
                                    <div class="stats-icon" style="background-color: rgba(255,255,255,0.2);">💤</div>
                                    <span>Average Sleep</span>
                                </div>
                                <small style="color: #ffffff; opacity: 0.8;">Last 7 trend avg.</small>
                            </div>

                            <div class="stats-value">5-6 Hours</div>
                            <div class="stats-subtitle">Variation from the previous 1 hour avg.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card animate-fade-in-right">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Daily Reflection</h2>
                        <p class="card-subtitle">Your thoughts for today</p>
                    </div>
                    <button class="btn btn-icon" id="add-notes-btn" title="Add Notes">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="card-content">
                    <div class="reflection-content">
                        Woke up early and finally tackled a big project!

                        <div class="tags mt-md">
                            <div class="badge badge-primary">#Grateful</div>
                            <div class="badge badge-primary">#Optimistic</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-2 mt-xl">
            <!-- Daily Mood Trends -->
            <div class="card animate-fade-in-left">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Daily Mood Trends</h2>
                        <p class="card-subtitle">Your patterns over the last 10 days</p>
                    </div>
                    <div class="badge badge-neutral">
                        <i class="fas fa-calendar-alt mr-sm"></i> Last 10 Days
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart">
                        <div class="bar-container">
                            <div class="bar neutral-mood" style="height: 80px;">
                                <div class="emoji-icon">😐</div>
                            </div>
                            <div class="day-label">Mon<br>30</div>
                        </div>

                        <div class="bar-container">
                            <div class="bar happy" style="height: 130px;">
                                <div class="emoji-icon">😊</div>
                            </div>
                            <div class="day-label">Tue<br>31</div>
                        </div>

                        <div class="bar-container">
                            <div class="bar sad" style="height: 60px;">
                                <div class="emoji-icon">😔</div>
                            </div>
                            <div class="day-label">Wed<br>01</div>
                        </div>

                        <div class="bar-container">
                            <div class="bar happy" style="height: 120px;">
                                <div class="emoji-icon">😊</div>
                            </div>
                            <div class="day-label">Thu<br>02</div>
                        </div>

                        <div class="bar-container">
                            <div class="bar calm" style="height: 90px;">
                                <div class="emoji-icon">😌</div>
                            </div>
                            <div class="day-label">Fri<br>03</div>
                        </div>

                        <div class="bar-container">
                            <div class="bar happy" style="height: 150px;">
                                <div class="emoji-icon">😊</div>
                            </div>
                            <div class="day-label">Sat<br>04</div>
                        </div>

                        <div class="bar-container">
                            <div class="bar happy" style="height: 140px;">
                                <div class="emoji-icon">😊</div>
                            </div>
                            <div class="day-label">Sun<br>05</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Monthly Mood Summary -->
            <div class="card animate-fade-in-right">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Monthly Mood Summary</h2>
                        <p class="card-subtitle">Visual breakdown of your moods</p>
                    </div>
                    <div class="badge badge-primary">
                        <i class="fas fa-chart-pie mr-sm"></i> <span id="current-month-year">May 2023</span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="mood-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Mood History Timeline -->
        <div class="card mt-xl animate-fade-in-up">
            <div class="card-header">
                <div>
                    <h2 class="card-title">Recent Mood History</h2>
                    <p class="card-subtitle">Your mood journey over the past 14 days</p>
                </div>
                <div class="flex gap-md">
                    <div class="badge badge-primary">
                        <i class="fas fa-calendar-alt mr-sm"></i> Last 14 Days
                    </div>
                    <button class="btn btn-secondary" id="view-all-history">
                        <i class="fas fa-history mr-sm"></i> View All
                    </button>
                </div>
            </div>
            <div class="card-content">
                <div class="timeline-container">
                    <!-- Timeline items will be added by JavaScript -->
                    <p class="no-data text-center p-xl">No mood entries yet. Start tracking your mood!</p>
                </div>
            </div>
        </div>
    </main>

    <button class="btn btn-primary floating-btn" title="Add New Mood Entry">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Notes Modal -->
    <div class="modal notes-modal" id="notes-modal">
        <div class="modal-content">
            <button class="modal-close" data-close-modal>&times;</button>
            <div class="modal-header">
                <h3 class="modal-title" id="notes-date">April 16, 2023</h3>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label class="input-label" for="notes-textarea">Your reflection for today</label>
                    <textarea class="textarea" id="notes-textarea" placeholder="Write your thoughts, feelings, and reflections for today..."></textarea>
                </div>
                <div class="input-group">
                    <label class="input-label">Tags</label>
                    <div class="flex gap-sm flex-wrap">
                        <div class="badge badge-primary">#Grateful</div>
                        <div class="badge badge-primary">#Optimistic</div>
                        <div class="badge badge-primary">#Productive</div>
                        <div class="badge badge-primary">#Relaxed</div>
                        <div class="badge badge-primary">#Energetic</div>
                        <div class="badge badge-primary">+ Add Tag</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>Cancel</button>
                <button class="btn btn-primary" onclick="saveNotes()">Save Notes</button>
            </div>
        </div>
    </div>

    <!-- Custom Mood Modal -->
    <div class="modal custom-mood-modal" id="custom-mood-modal">
        <div class="modal-content">
            <button class="modal-close" data-close-modal>&times;</button>
            <div class="modal-header">
                <h3 class="modal-title">Create Custom Mood</h3>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label class="input-label" for="custom-mood-name">Mood Name</label>
                    <input type="text" class="input" id="custom-mood-name" placeholder="e.g., Excited, Anxious, etc.">
                </div>
                <div class="input-group">
                    <label class="input-label">Select Emoji</label>
                    <div class="grid grid-4 gap-md">
                        <div class="emoji-option">😀</div>
                        <div class="emoji-option">😍</div>
                        <div class="emoji-option">🤩</div>
                        <div class="emoji-option">😎</div>
                        <div class="emoji-option">🥳</div>
                        <div class="emoji-option">😴</div>
                        <div class="emoji-option">🤔</div>
                        <div class="emoji-option">😬</div>
                        <div class="emoji-option">😰</div>
                        <div class="emoji-option">😭</div>
                        <div class="emoji-option">🥰</div>
                        <div class="emoji-option">😇</div>
                    </div>
                </div>
                <div class="input-group">
                    <label class="input-label" for="custom-mood-color">Mood Color</label>
                    <input type="color" class="input" id="custom-mood-color" value="#6366f1">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>Cancel</button>
                <button class="btn btn-primary" onclick="saveCustomMood()">Save Mood</button>
            </div>
        </div>
    </div>

    <!-- Mood Reflection Modal -->
    <div class="modal reflection-modal" id="mood-reflection-modal">
        <div class="modal-content">
            <button class="modal-close" data-close-modal>&times;</button>
            <div class="modal-header">
                <h3 class="modal-title">Tell us more about your mood</h3>
            </div>
            <div class="modal-body">
                <div class="selected-mood-display">
                    <div class="selected-mood-emoji">😊</div>
                    <div class="selected-mood-name">Happy</div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="mood-reflection">Why do you feel <span id="selected-mood-text">happy</span> today?</label>
                    <textarea class="textarea" id="mood-reflection" placeholder="Share your thoughts and feelings..." required></textarea>
                    <div class="input-error" id="reflection-error">Please share your thoughts</div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="sleep-hours">How many hours did you sleep last night?</label>
                    <div class="sleep-input-container">
                        <input type="range" id="sleep-hours-slider" min="0" max="12" step="0.5" value="7" class="sleep-slider">
                        <div class="sleep-value-display">
                            <input type="number" id="sleep-hours" min="0" max="12" step="0.5" value="7" class="input sleep-input" required>
                            <span class="sleep-unit">hours</span>
                        </div>
                    </div>
                    <div class="sleep-labels">
                        <span>0h</span>
                        <span>6h</span>
                        <span>12h</span>
                    </div>
                    <div class="input-error" id="sleep-error">Please enter your sleep hours</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>Cancel</button>
                <button class="btn btn-primary" id="save-reflection-btn">Save</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">Mood Tracker</h3>
                    <p class="text-medium">Track your emotions and discover patterns in your mood to improve your mental well-being.</p>
                </div>
                <div class="footer-section">
                    <h3 class="footer-title">Quick Links</h3>
                    <div class="footer-links">
                        <a href="index.html" class="footer-link">Dashboard</a>
                        <a href="calendar-view.html" class="footer-link">Calendar</a>
                        <a href="#" class="footer-link">Statistics</a>
                        <a href="#" class="footer-link">Settings</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3 class="footer-title">Resources</h3>
                    <div class="footer-links">
                        <a href="#" class="footer-link">Help Center</a>
                        <a href="#" class="footer-link">Privacy Policy</a>
                        <a href="#" class="footer-link">Terms of Service</a>
                        <a href="#" class="footer-link">Contact Us</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="copyright">
                    &copy; 2023 Mood Tracker. All rights reserved.
                </div>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript files -->
    <script src="js/shared.js"></script>
    <script src="js/mood-tracker.js"></script>
    <script src="js/mood-tracker-enhanced.js"></script>
    <script src="js/mood-reflection.js"></script>
    <script src="js/mood-history-enhanced.js"></script>
    <script src="js/mood-chart-enhanced.js"></script>

    <script>
        // Initialize page-specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Update current date
            const dateElement = document.getElementById('current-date');
            const now = new Date();
            dateElement.textContent = now.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // Update current month and year for the chart
            const monthYearElement = document.getElementById('current-month-year');
            if (monthYearElement) {
                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                                   'July', 'August', 'September', 'October', 'November', 'December'];
                monthYearElement.textContent = `${monthNames[now.getMonth()]} ${now.getFullYear()}`;
            }

            // Initialize emoji picker
            const emojiOptions = document.querySelectorAll('.emoji-option');
            emojiOptions.forEach(option => {
                option.addEventListener('click', function() {
                    emojiOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });

            // Connect add notes button
            document.getElementById('add-notes-btn').addEventListener('click', function() {
                openModal(document.getElementById('notes-modal'));
            });

            // Connect view all history button
            document.getElementById('view-all-history').addEventListener('click', function() {
                showNotification('Viewing all mood history', 'info');
            });

            // Initialize mood chart if available
            if (typeof window.createMoodSummaryChart === 'function') {
                // Set global variables needed for the chart
                window.currentYear = now.getFullYear();
                window.currentMonth = now.getMonth();

                // Create the chart with a slight delay to ensure DOM is ready
                setTimeout(() => {
                    window.createMoodSummaryChart();
                }, 300);
            }
        });
    </script>
</body>
</html>